import{a as se}from"./chunk-JB3XGCOG.js";import{a as X,b,d as Y,e as Z,g as ee,h as te,i as ie,j as ne,k as re,l as oe}from"./chunk-S3GV3V6T.js";import{$ as _,$a as k,B as z,Ba as j,Ca as G,Da as W,Ea as U,Fa as v,Jb as R,R as A,S as H,Ta as d,Ua as s,Va as o,W as D,Wa as C,Xb as K,Yb as J,_ as f,_a as M,a as m,b as g,bb as P,db as u,eb as p,h as V,la as L,pa as $,rb as a,sa as c,sb as F,tb as O,ub as I}from"./chunk-2RJLL2X4.js";var ue=(()=>{class r{nonce=D($,{optional:!0});_printStyle=[];_styleSheetFile="";printComplete=new V;setPrintStyle(e){this._printStyle=[];for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&this._printStyle.push((t+JSON.stringify(e[t])).replace(/['"]+/g,""))}returnStyleValues(){return`<style${this.nonce?` nonce="${this.nonce}"`:""}> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}returnStyleSheetLinkTags(){return this._styleSheetFile}setStyleSheetFile(e){let t=function(i){return`<link rel="stylesheet" type="text/css" href="${i}">`};if(e.indexOf(",")!==-1){let i=e.split(",");this._styleSheetFile=i.map(l=>t(l)).join("")}else this._styleSheetFile=t(e)}updateInputDefaults(e){for(let t=0;t<e.length;t++){let i=e[t];i.defaultValue=i.value,i.checked&&(i.defaultChecked=!0)}}updateSelectDefaults(e){for(let t=0;t<e.length;t++){let i=e[t],l=i.selectedIndex,h=i.options[l];h.defaultSelected=!0}}updateTextAreaDefaults(e){for(let t=0;t<e.length;t++){let i=e[t];i.defaultValue=i.value}}canvasToImageHtml(e){return`<img src="${e.toDataURL()}" style="max-width: 100%;">`}updateCanvasToImage(e){for(let t=0;t<e.length;t++){let i=this.canvasToImageHtml(e[t]);e[t].insertAdjacentHTML("afterend",i),e[t].remove()}}getHtmlContents(e){let t=document.getElementById(e);if(!t)return null;let i=t.getElementsByTagName("input"),l=t.getElementsByTagName("select"),h=t.getElementsByTagName("textarea"),w=t.getElementsByTagName("canvas");return this.updateInputDefaults(i),this.updateSelectDefaults(l),this.updateTextAreaDefaults(h),this.updateCanvasToImage(w),t.innerHTML}getElementTag(e){let t=[],i=document.getElementsByTagName(e);for(let l=0;l<i.length;l++)t.push(i[l].outerHTML);return t.join(`\r
`)}notifyPrintComplete(){this.printComplete.next()}print(e){let t="",i="",l="top=0,left=0,height=auto,width=auto",h=this.getElementTag("base");e.useExistingCss&&(t=this.getElementTag("style"),i=this.getElementTag("link")),e.openNewTab&&(l="");let w=this.getHtmlContents(e.printSectionId);if(!w){console.error(`Print section with id ${e.printSectionId} not found.`);return}let S=window.open("","_blank",l);if(!S){console.error("Could not open print window.");return}S.document.open();let y=S.document,q=y.createElement("html"),x=y.createElement("head"),E=y.createElement("body"),B=y.createElement("title");B.textContent=e.printTitle||"",x.appendChild(B),h&&(x.innerHTML+=h),x.innerHTML+=this.returnStyleValues(),x.innerHTML+=this.returnStyleSheetLinkTags(),x.innerHTML+=t,x.innerHTML+=i,e.bodyClass&&(E.className=e.bodyClass),E.innerHTML+=w;let T=y.createElement("script");T.defer=!0,this.nonce&&T.setAttribute("nonce",this.nonce),T.textContent=`
      function triggerPrint(event) {
        window.removeEventListener('load', triggerPrint, false);
        ${e.previewOnly?"":`setTimeout(function() {
          closeWindow(window.print());
        }, ${e.printDelay});`}
      }
      function closeWindow(){
        ${e.closeWindow?"window.close();":""}
      }
      window.addEventListener('load', triggerPrint, false);
      window.addEventListener('afterprint', function () {
        if (window.opener) {
          window.opener.postMessage({ type: 'print-complete' }, '*');
        }
        closeWindow();
      }, { once: true });
    `,E.appendChild(T),q.appendChild(x),q.appendChild(E),y.appendChild(q),S.document.close();let Q=de=>{de.data?.type==="print-complete"&&(this.notifyPrintComplete(),window.removeEventListener("message",Q))};window.addEventListener("message",Q)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var N=class{printSectionId="";printTitle="";useExistingCss=!1;bodyClass="";openNewTab=!1;previewOnly=!1;closeWindow=!0;printDelay=0;constructor(n){n&&Object.assign(this,n)}},le=(()=>{class r extends ue{printOptions=new N;set previewOnly(e){this.printOptions=g(m({},this.printOptions),{previewOnly:e})}set printSectionId(e){this.printOptions=g(m({},this.printOptions),{printSectionId:e})}set printTitle(e){this.printOptions=g(m({},this.printOptions),{printTitle:e})}set useExistingCss(e){this.printOptions=g(m({},this.printOptions),{useExistingCss:e})}set printDelay(e){this.printOptions=g(m({},this.printOptions),{printDelay:e})}set closeWindow(e){this.printOptions=g(m({},this.printOptions),{closeWindow:e})}set bodyClass(e){this.printOptions=g(m({},this.printOptions),{bodyClass:e})}set openNewTab(e){this.printOptions=g(m({},this.printOptions),{openNewTab:e})}set printStyle(e){super.setPrintStyle(e)}set styleSheetFile(e){super.setStyleSheetFile(e)}print(){super.print(this.printOptions),this.printComplete.pipe(z(1)).subscribe(()=>{this.printCompleted.emit(void 0)})}printCompleted=R();static \u0275fac=(()=>{let e;return function(i){return(e||(e=L(r)))(i||r)}})();static \u0275dir=W({type:r,selectors:[["","ngxPrint",""]],hostBindings:function(t,i){t&1&&u("click",function(){return i.print()})},inputs:{previewOnly:"previewOnly",printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",closeWindow:"closeWindow",bodyClass:"bodyClass",openNewTab:"openNewTab",printStyle:"printStyle",styleSheetFile:"styleSheetFile"},outputs:{printCompleted:"printCompleted"},features:[U]})}return r})(),ae=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=G({type:r});static \u0275inj=H({})}return r})();function ge(r,n){if(r&1&&(s(0,"li")(1,"span",25),a(2),o(),a(3),o()),r&2){let e=n.$implicit,t=p().$implicit;c(2),F(e),c(),O(" ",t.choices[e])}}function fe(r,n){if(r&1){let e=P();s(0,"div",15)(1,"div",16)(2,"strong"),a(3),o(),s(4,"div",17)(5,"button",18),u("click",function(){let i=f(e).index,l=p(2);return _(l.moveToTop(i))}),a(6,"\u2912"),o(),s(7,"button",19),u("click",function(){let i=f(e).index,l=p(2);return _(l.moveUp(i))}),a(8,"\u25B2"),o(),s(9,"button",20),u("click",function(){let i=f(e).index,l=p(2);return _(l.moveDown(i))}),a(10,"\u25BC"),o(),s(11,"button",21),u("click",function(){let i=f(e).index,l=p(2);return _(l.moveToBottom(i))}),a(12,"\u2913"),o()()(),s(13,"ul",22),v(14,ge,4,2,"li",23),o(),s(15,"div",10)(16,"button",24),u("click",function(){let i=f(e).index,l=p(2);return _(l.edit(i))}),a(17,"\u270F\uFE0F Edit"),o(),s(18,"button",24),u("click",function(){let i=f(e).index,l=p(2);return _(l.remove(i))}),a(19,"\u{1F5D1}\uFE0F Delete"),o()()()}if(r&2){let e=n.$implicit,t=n.index,i=p(2);c(3),I("",t+1," ",e.text),c(2),d("disabled",t===0),c(2),d("disabled",t===0),c(2),d("disabled",t===i.questions.length-1),c(2),d("disabled",t===i.questions.length-1),c(3),d("ngForOf",i.keys)}}function _e(r,n){if(r&1){let e=P();M(0),s(1,"h2"),a(2,"New/edited question"),o(),s(3,"form",3),u("ngSubmit",function(){f(e);let i=p();return _(i.addQuestion())}),s(4,"label"),a(5,"Question"),o(),C(6,"textarea",4),s(7,"div",5)(8,"label"),a(9,"A"),o(),C(10,"input",6),s(11,"label"),a(12,"B"),o(),C(13,"input",7),s(14,"label"),a(15,"C"),o(),C(16,"input",8),s(17,"label"),a(18,"D"),o(),C(19,"input",9),o(),s(20,"div",10)(21,"button",11),a(22),o(),s(23,"button",12),u("click",function(){f(e);let i=p();return _(i.resetForm())}),a(24,"Clear"),o()()(),s(25,"h2"),a(26,"List of Questions"),o(),s(27,"div",13),v(28,fe,20,7,"div",14),o(),k()}if(r&2){let e=p();c(3),d("formGroup",e.fGroup),c(18),d("disabled",e.fGroup.invalid),c(),F(e.fGroup.value.id?"\u{1F4BE}Save Changes":"\u2795Add Question"),c(6),d("ngForOf",e.questions)}}function xe(r,n){if(r&1&&(s(0,"li")(1,"span",25),a(2),o(),a(3),o()),r&2){let e=n.$implicit,t=p().$implicit;c(2),O("",e,")"),c(),O(" ",t.choices[e])}}function he(r,n){if(r&1&&(s(0,"div",15)(1,"div")(2,"strong"),a(3),o()(),s(4,"ul"),v(5,xe,4,2,"li",23),o()()),r&2){let e=n.$implicit,t=n.index,i=p(2);c(3),I("",t+1," ",e.text),c(2),d("ngForOf",i.keys)}}function ye(r,n){if(r&1&&(M(0),s(1,"h2"),a(2,"Questions"),o(),s(3,"button",26),a(4,"Print"),o(),s(5,"div",27),v(6,he,6,3,"div",14),o(),k()),r&2){let e=p();c(6),d("ngForOf",e.questions)}}var ce=class r{fBuilder=D(re);mode="build";questions=[];keys=["A","B","C","D"];constructor(){}fGroup=this.fBuilder.group({id:[""],text:["",b.required],A:["",b.required],B:["",b.required],C:["",b.required],D:["",b.required]});swap(n,e,t){if(e===t)return n;let i=n.slice(),l=i[e];return i[e]=i[t],i[t]=l,i}moveUp(n){n<=0||(this.questions=this.swap(this.questions,n,n-1))}moveDown(n){n>=this.questions.length-1||(this.questions=this.swap(this.questions,n,n+1))}moveToTop(n){if(n<=0)return;let e=this.questions.slice(),[t]=e.splice(n,1);e.unshift(t),this.questions=e}moveToBottom(n){if(n>=this.questions.length-1)return;let e=this.questions.slice(),[t]=e.splice(n,1);e.push(t),this.questions=e}newId(){return"q_"+Math.random().toString(36).slice(2)+"_"+Date.now()}resetForm(){this.fGroup.reset({id:"",text:"",A:"",B:"",C:"",D:""})}addQuestion(){if(this.fGroup.invalid)return;let n=this.fGroup.getRawValue(),e={id:n.id||this.newId(),text:n.text,choices:{A:n.A,B:n.B,C:n.C,D:n.D}},t=this.questions.slice(),i=t.findIndex(l=>l.id===e.id);i>=0?t[i]=e:t.push(e),this.questions=t,this.resetForm()}edit(n){let e=this.questions[n];this.fGroup.setValue({id:e.id,text:e.text,A:e.choices.A,B:e.choices.B,C:e.choices.C,D:e.choices.D}),window.scrollTo(0,0)}remove(n){let e=this.questions.slice(),t=e.splice(n,1)[0];this.questions=e}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=j({type:r,selectors:[["app-quiz"]],decls:11,vars:4,consts:[[1,"row"],[3,"click","disabled"],[4,"ngIf"],[3,"ngSubmit","formGroup"],["rows","2","formControlName","text","required",""],[1,"grid"],["formControlName","A","required",""],["formControlName","B","required",""],["formControlName","C","required",""],["formControlName","D","required",""],[1,"actions"],["type","submit",3,"disabled"],["type","button",3,"click"],[1,"qgrid"],["class","qcard",4,"ngFor","ngForOf"],[1,"qcard"],[1,"qheader"],[1,"reorder"],["title","Top",3,"click","disabled"],["title","Up",3,"click","disabled"],["title","Down",3,"click","disabled"],["title","Bottom",3,"click","disabled"],[1,"answers-list"],[4,"ngFor","ngForOf"],[3,"click"],[1,"letter","small"],["printSectionId","print-section","ngxPrint",""],["id","print-section"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"button",1),u("click",function(){return t.mode="build"}),s(2,"mat-icon"),a(3,"save"),o(),a(4," Edit"),o(),s(5,"button",1),u("click",function(){return t.mode="print"}),s(6,"mat-icon"),a(7,"printer"),o(),a(8,"Print"),o()(),v(9,_e,29,4,"ng-container",2)(10,ye,7,1,"ng-container",2)),e&2&&(c(),d("disabled",t.mode==="build"),c(4),d("disabled",t.mode==="print"||t.questions.length===0),c(4),d("ngIf",t.mode==="build"),c(),d("ngIf",t.mode==="print"&&t.questions.length))},dependencies:[oe,ee,X,Y,Z,ne,te,ie,K,J,ae,le,se],styles:[".wrap[_ngcontent-%COMP%]{max-width:1100px;margin:24px auto;padding:16px}.row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;flex-wrap:wrap}.muted[_ngcontent-%COMP%]{color:#6b7280}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:8px}textarea[_ngcontent-%COMP%]{width:100%}.qgrid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:12px;align-items:start}.qcard[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px}.qheader[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;align-items:center}.reorder[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px 8px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:24px 1fr;gap:8px 12px;align-items:center}.answers-list[_ngcontent-%COMP%]{padding-left:0;margin:8px 0;list-style:none}.answers-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}.tile[_ngcontent-%COMP%]{display:grid;grid-template-columns:36px 1fr;align-items:center;gap:8px;padding:10px;border:1px solid #e5e7eb;border-radius:10px;cursor:pointer;-webkit-user-select:none;user-select:none}.letter[_ngcontent-%COMP%]{width:36px;height:36px;display:inline-grid;place-items:center;border:1px solid #e5e7eb;border-radius:8px;font-weight:700}.letter.small[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:6px;font-size:12px}.tile[_ngcontent-%COMP%]:hover{background:#f9fafb}.tile[_ngcontent-%COMP%]:focus-within{box-shadow:0 0 0 3px #93c5fd55}.result[_ngcontent-%COMP%]{font-size:18px;font-weight:700}"]})};export{ce as Quiz};
