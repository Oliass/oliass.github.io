import{f as U,g as j,h as q,i as z,j as L,k as J,l as K,m as Q,n as X,o as Y,p as Z,q as M}from"./chunk-VFXFCBAL.js";import{a as se,b as pe}from"./chunk-JB3XGCOG.js";import{a as ee,b as y,d as te,e as re,g as ie,h as ne,i as ae,j as oe,k as le,l as ce}from"./chunk-S3GV3V6T.js";import{a as me,b as de,c as ue}from"./chunk-QELQ3BLZ.js";import"./chunk-ZNAXOUNC.js";import{$ as p,$a as w,$b as G,Ba as I,Bb as W,Fa as x,Na as V,Qa as k,R as P,Ra as A,Sa as R,Ta as u,Ua as n,V as T,Va as l,W as D,Wa as g,Yb as $,_ as s,_a as C,bb as _,db as f,eb as c,pb as E,rb as m,sa as o,sb as N,tb as B,ub as F,vb as v,wa as O,wb as b,xb as S,yb as H}from"./chunk-2RJLL2X4.js";var h=class t{constructor(r){this._httpClient=r}extraCurrUrl="api/extracurriculum";extraSaveUrl="api/extrasave";fetchAllExtracurriculum(){return this._httpClient.get(`http://51.21.254.31/${this.extraCurrUrl}`)}AddExtracurriculum(r){return this._httpClient.post(`http://51.21.254.31/${this.extraCurrUrl}`,r)}AddExtraStudent(r){return this._httpClient.post(`http://51.21.254.31/${this.extraSaveUrl}`,r)}static \u0275fac=function(e){return new(e||t)(T(G))};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})};var ge=()=>["expandedDetail"];function Ce(t,r){if(t&1){let e=_();n(0,"div")(1,"form",10)(2,"label"),m(3,"Title of Extracurriculum activity"),l(),n(4,"textarea",11),S("ngModelChange",function(a){s(e);let d=c(2);return b(d.newtitle,a)||(d.newtitle=a),p(a)}),l(),n(5,"label"),m(6,"description"),l(),n(7,"textarea",12),S("ngModelChange",function(a){s(e);let d=c(2);return b(d.newdesc,a)||(d.newdesc=a),p(a)}),l()(),n(8,"button",13),f("click",function(){s(e);let a=c(2);return p(a.AddExtracurr())}),m(9,"Submit"),l()()}if(t&2){let e=c(2);o(),u("formGroup",e.fGroup),o(3),v("ngModel",e.newtitle),o(3),v("ngModel",e.newdesc)}}function we(t,r){if(t&1&&(n(0,"div"),x(1,Ce,10,3,"div",0),l()),t&2){let e=c();o(),u("ngIf",e.checkTeacher())}}function Ee(t,r){if(t&1){let e=_();n(0,"div")(1,"button",13),f("click",function(){s(e);let a=c();return p(a.addnew=!0)}),m(2,"Add new Extracurriculum"),l()()}}function he(t,r){t&1&&(n(0,"th",15),m(1,"Extracurriculum Activities"),l())}function ve(t,r){if(t&1&&(n(0,"td",16),m(1),l()),t&2){let e=r.$implicit,i=c().$implicit;o(),N(e[i])}}function be(t,r){if(t&1&&(C(0,2),x(1,he,2,0,"th",14)(2,ve,2,1,"td",5),w()),t&2){let e=r.$implicit;u("matColumnDef",H(e))}}function Se(t,r){t&1&&(n(0,"th",17),m(1,"\xA0"),l())}function Me(t,r){if(t&1){let e=_();n(0,"td",16)(1,"button",18),f("click",function(a){let d=s(e).$implicit;return c().toggle(d),p(a.stopPropagation())}),n(2,"mat-icon"),m(3,"keyboard_arrow_down"),l()()()}if(t&2){let e=r.$implicit,i=c();o(),E("example-toggle-button-expanded",i.isExpanded(e))}}function ye(t,r){if(t&1){let e=_();n(0,"div")(1,"button",13),f("click",function(){s(e);let a=c().$implicit,d=c();return p(d.AddExtracurrStud(a.extraid))}),m(2,"Sign Up"),l()()}}function Pe(t,r){if(t&1&&(n(0,"td",16)(1,"div",19)(2,"div",20)(3,"div",21),m(4),n(5,"span",22),m(6),l(),g(7,"br"),x(8,ye,3,0,"div",0),l()()()()),t&2){let e=r.$implicit,i=c();V("colspan",i.columnsToDisplayWithExpand.length),o(),E("example-element-detail-wrapper-expanded",i.isExpanded(e)),o(3),B(" ",e.description," "),o(2),F(" Supervised by ",e.firstname," ",e.lastname," "),o(2),u("ngIf",i.checkStudent())}}function Te(t,r){t&1&&g(0,"tr",23)}function De(t,r){if(t&1){let e=_();n(0,"tr",24),f("click",function(){let a=s(e).$implicit,d=c();return p(d.toggle(a))}),l()}if(t&2){let e=r.$implicit,i=c();E("example-expanded-row",i.isExpanded(e))}}function Oe(t,r){t&1&&g(0,"tr",25)}var xe=class t{constructor(r){this.extracurrService=r}fBuilder=D(le);newtitle="";newdesc="";addnew=!1;fGroup=this.fBuilder.group({id:[""],title:["",y.required],description:["",y.required]});dataSource=new M;columnsToDisplay=["title"];columnsToDisplayWithExpand=[...this.columnsToDisplay,"expand"];extras=[];ngAfterViewInit(){this.extracurrService.fetchAllExtracurriculum().subscribe(r=>{this.extras=r,this.dataSource=new M(r),console.log(this.extras)})}expandedElement={extraid:0,title:"",description:"",firstname:"",lastname:""};isExpanded(r){return this.expandedElement===r}toggle(r){this.expandedElement=this.isExpanded(r)?null:r}AddExtracurr(){let r={title:this.newtitle,description:this.newdesc,teacher:Number(sessionStorage.getItem("userid"))};this.extracurrService.AddExtracurriculum(r).subscribe({next:e=>{console.log("ExtraCurriculum added Successfully"),this.addnew=!1,window.location.reload()},error:e=>{console.log("Error"),console.log(e)}})}AddExtracurrStud(r){let e={extraid:Number(r),student:Number(sessionStorage.getItem("userid"))};this.extracurrService.AddExtraStudent(e).subscribe({next:i=>{console.log("ExtraCurriculum Student added Successfully")},error:i=>{console.log("Error"),console.log(i)}})}checkStudent(){return sessionStorage.getItem("usertype")=="student"}checkTeacher(){return sessionStorage.getItem("usertype")=="teacher"}static \u0275fac=function(e){return new(e||t)(O(h))};static \u0275cmp=I({type:t,selectors:[["app-extra-curr"]],decls:14,vars:7,consts:[[4,"ngIf"],["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],[3,"formGroup"],["rows","2","formControlName","title","required","",3,"ngModelChange","ngModel"],["rows","4","formControlName","description","required","",3,"ngModelChange","ngModel"],["mat-flat-button","",2,"margin-left","5px",3,"click"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","aria-label","row actions"],["matIconButton","","aria-label","expand row",1,"example-toggle-button",3,"click"],[1,"example-element-detail-wrapper"],[1,"example-element-detail"],[1,"example-element-description"],[1,"example-element-description-attribution"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(e,i){e&1&&(x(0,we,2,1,"div",0)(1,Ee,3,0,"div",0),g(2,"br"),n(3,"table",1),A(4,be,3,2,"ng-container",2,k),C(6,3),x(7,Se,2,0,"th",4)(8,Me,4,2,"td",5),w(),C(9,6),x(10,Pe,9,7,"td",5),w(),x(11,Te,1,0,"tr",7)(12,De,1,2,"tr",8)(13,Oe,1,0,"tr",9),l()),e&2&&(u("ngIf",i.addnew),o(),u("ngIf",!i.addnew),o(2),u("dataSource",i.dataSource),o(),R(i.columnsToDisplay),o(7),u("matHeaderRowDef",i.columnsToDisplayWithExpand),o(),u("matRowDefColumns",i.columnsToDisplayWithExpand),o(),u("matRowDefColumns",W(6,ge)))},dependencies:[Z,U,q,K,z,j,Q,L,J,X,Y,ue,de,me,pe,se,ce,ie,ee,te,re,oe,ne,ae,$],styles:["table[_ngcontent-%COMP%]{width:100%}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]{cursor:pointer}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:#f5f5f5}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail-wrapper[_ngcontent-%COMP%]{overflow:hidden;display:grid;grid-template-rows:0fr;grid-template-columns:100%;transition:grid-template-rows 225ms cubic-bezier(.4,0,.2,1)}.example-element-detail-wrapper-expanded[_ngcontent-%COMP%]{grid-template-rows:1fr}.example-element-detail[_ngcontent-%COMP%]{display:flex;min-height:0}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid black;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.75}.example-toggle-button[_ngcontent-%COMP%]{transition:transform 225ms cubic-bezier(.4,0,.2,1)}.example-toggle-button-expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.mat-mdc-header-row[_ngcontent-%COMP%]{background-color:#7fa3ff!important}.wrap[_ngcontent-%COMP%]{max-width:1100px;margin:24px auto;padding:16px}.row[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;flex-wrap:wrap}.muted[_ngcontent-%COMP%]{color:#6b7280}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:8px}textarea[_ngcontent-%COMP%]{width:100%}"]})};export{xe as ExtraCurr};
